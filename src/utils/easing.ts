// Easing はアニメーション向けの汎用イージング関数群を集約する。

/**
 * 汎用的なイージング関数を提供するユーティリティクラス。
 * すべての関数は 0から1 の入力 (x) を受け取り、0から1 の出力 (アニメーションの進行度) を返します。
 */
export class Easing {
    // 静的メソッドとして元のロジックをそのまま保持

    /**
     * Sine（正弦波）カーブを使用したイージング関数（入り）。
     * アニメーションの開始時にゆっくりと動き出し、徐々に加速していく挙動を作ります。
     * Math.cosを使用しており、0からπ/2の範囲で変化します。
     * 直線的な動き（Linear）に比べて、自然で柔らかい加速感が得られます。
     * 物理的な挙動というよりは、優雅な動き出しを表現したい場合に適しています。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInSine(x: number): number {
        return 1 - Math.cos((x * Math.PI) / 2);
    }

    /**
     * Sine（正弦波）カーブを使用したイージング関数（抜き）。
     * アニメーションの終了に向かって徐々に減速し、滑らかに停止する挙動を作ります。
     * Math.sinを使用しており、0からπ/2の範囲で変化します。
     * 急激な停止を避け、余韻を残すような自然な止まり方を表現できます。
     * UIのフェードインや、要素のスライドインなど、多くの場面で使いやすい標準的なイージングです。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeOutSine(x: number): number {
        return Math.sin((x * Math.PI) / 2);
    }

    /**
     * Sine（正弦波）カーブを使用したイージング関数（入り抜き）。
     * 前半はゆっくりと加速し、中間地点で最高速になり、後半はゆっくりと減速します。
     * easeInSineとeaseOutSineを組み合わせたような動きで、
     * 開始と終了の両方が滑らかになります。
     * 往復運動や、ループするアニメーションのつなぎ目を自然にするのに最適です。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInOutSine(x: number): number {
        return -(Math.cos(Math.PI * x) - 1) / 2;
    }

    /**
     * 二次関数（Quadratic）を使用したイージング関数（入り）。
     * xの2乗（x^2）に基づいて値が変化するため、Sineカーブよりも少し強めの加速感が得られます。
     * 開始直後は非常にゆっくりで、後半にかけてグッと速度が上がります。
     * 重力に従って落下する物体のような、物理的な加速感を表現するのに適しています。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInQuad(x: number): number {
        return x * x;
    }

    /**
     * 二次関数（Quadratic）を使用したイージング関数（抜き）。
     * 減速しながら停止する動きを作ります。
     * Sineカーブよりもブレーキの効きが良く、キビキビとした動作の中に滑らかさを残したい場合に適しています。
     * ユーザーの操作に対するフィードバックなど、レスポンスの良さを感じさせつつ
     * 唐突さを消したい場面で有効です。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeOutQuad(x: number): number {
        return 1 - (1 - x) * (1 - x);
    }

    /**
     * 二次関数（Quadratic）を使用したイージング関数（入り抜き）。
     * 前半は2乗のカーブで加速し、後半は逆の2乗カーブで減速します。
     * 中間地点での速度変化がSineよりも急峻になります。
     * 明確な「動き出し」と「停止」のメリハリをつけたい場合に適しています。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInOutQuad(x: number): number {
        return x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2;
    }

    /**
     * 三次関数（Cubic）を使用したイージング関数（入り）。
     * xの3乗（x^3）に基づくため、Quad（2乗）よりもさらに初期の立ち上がりが遅く、
     * 後半の加速が急激になります。
     * 非常に重い物体がゆっくりと動き出すような、重量感のある演出に適しています。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInCubic(x: number): number {
        return x * x * x;
    }

    /**
     * 三次関数（Cubic）を使用したイージング関数（抜き）。
     * 3乗のカーブで減速するため、停止直前のブレーキが非常に強く、
     * すっと止まるような印象を与えます。
     * Quadよりもメリハリがあり、スタイリッシュなUIアニメーションなどで好まれます。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeOutCubic(x: number): number {
        return 1 - Math.pow(1 - x, 3);
    }

    /**
     * 三次関数（Cubic）を使用したイージング関数（入り抜き）。
     * 加速と減速のコントラストが強く、ダイナミックな動きになります。
     * ゆっくり動き出し、中央で素早く移動し、ゆっくり止まる、という
     * 緩急のついたアニメーションを作ることができます。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInOutCubic(x: number): number {
        return x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2;
    }

    /**
     * 四次関数（Quart）を使用したイージング関数（入り）。
     * xの4乗（x^4）に基づき、Cubicよりもさらに極端な加速カーブを描きます。
     * 開始からしばらくはほとんど動かず、最後に一気に目標値に達します。
     * 溜めのある動きや、爆発的な加速を表現したい場合に使用します。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInQuart(x: number): number {
        return x * x * x * x;
    }

    /**
     * 四次関数（Quart）を使用したイージング関数（抜き）。
     * 非常に滑らかに、かつしっかりと減速して停止します。
     * 停止位置への収束が非常にスムーズで、高級感のある動きになります。
     * 画面遷移や、重要な要素の登場演出などに適しています。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeOutQuart(x: number): number {
        return 1 - Math.pow(1 - x, 4);
    }

    /**
     * 四次関数（Quart）を使用したイージング関数（入り抜き）。
     * 非常に強い緩急を持ちます。
     * 動き出しと停止は極めてゆっくりで、中間部分は非常に高速になります。
     * 瞬間移動のような、キレのある移動演出に使えます。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInOutQuart(x: number): number {
        return x < 0.5 ? 8 * x * x * x * x : 1 - Math.pow(-2 * x + 2, 4) / 2;
    }

    /**
     * 五次関数（Quint）を使用したイージング関数（入り）。
     * xの5乗（x^5）に基づき、Quartよりもさらに鋭い加速を行います。
     * 実質的に、アニメーションの最後の瞬間までほとんど変化しないように見え、
     * 最後に一瞬で変化するような極端なカーブです。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInQuint(x: number): number {
        return x * x * x * x * x;
    }

    /**
     * 五次関数（Quint）を使用したイージング関数（抜き）。
     * 非常に長い時間をかけて減速し、停止します。
     * ほぼ停止しているような状態が長く続くため、
     * 非常に繊細で静的な印象を与える終了アニメーションになります。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeOutQuint(x: number): number {
        return 1 - Math.pow(1 - x, 5);
    }

    /**
     * 五次関数（Quint）を使用したイージング関数（入り抜き）。
     * イージング関数の中で最も極端な緩急の一つです。
     * ほぼ静止状態から一瞬で移動し、また静止状態に戻るような、
     * インパクトのある動きを作ることができます。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInOutQuint(x: number): number {
        return x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2;
    }

    /**
     * 指数関数（Exponential）を使用したイージング関数（入り）。
     * 2の累乗を使用し、他の多項式系イージングよりもさらに急激な変化をします。
     * 開始時は完全に静止しているかのように見え、最後に爆発的に加速します。
     * SFチックな演出や、デジタルな表現に適しています。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInExpo(x: number): number {
        return x === 0 ? 0 : Math.pow(2, 10 * x - 10);
    }

    /**
     * 指数関数（Exponential）を使用したイージング関数（抜き）。
     * 非常に素早く目標値に近づき、最後は無限に時間をかけて収束していくような動きです。
     * キレの良さと、機械的な精密さを感じさせる減速カーブです。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeOutExpo(x: number): number {
        return x === 1 ? 1 : 1 - Math.pow(2, -10 * x);
    }

    /**
     * 指数関数（Exponential）を使用したイージング関数（入り抜き）。
     * 中央部分での変化速度が極めて速く、両端では非常にゆっくりです。
     * 閃光が走るような、鋭く短いアクションを強調したい場合に効果的です。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInOutExpo(x: number): number {
        return x === 0 ?
            0 :
            x === 1 ?
                1 :
                x < 0.5 ?
                    Math.pow(2, 20 * x - 10) / 2 :
                    (2 - Math.pow(2, -20 * x + 10)) / 2;
    }

    /**
     * 円（Circular）の方程式を使用したイージング関数（入り）。
     * 円弧を描くような軌道で変化します。
     * Sineカーブに似ていますが、より急な立ち上がりと、後半の強い加速が特徴です。
     * 独特の「張り」のある動きを作ることができます。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInCirc(x: number): number {
        return 1 - Math.sqrt(1 - Math.pow(x, 2));
    }

    /**
     * 円（Circular）の方程式を使用したイージング関数（抜き）。
     * 逆円弧を描くように減速します。
     * 停止直前の変化が比較的急で、ピタッと止まるような印象を与えます。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeOutCirc(x: number): number {
        return Math.sqrt(1 - Math.pow(x - 1, 2));
    }

    /**
     * 円（Circular）の方程式を使用したイージング関数（入り抜き）。
     * 前半と後半で円弧をつなぎ合わせたようなカーブです。
     * 加速と減速がはっきりしており、かつ有機的な曲線美を感じさせる動きになります。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0 〜 1.0）。
     */
    static easeInOutCirc(x: number): number {
        return x < 0.5 ?
            (1 - Math.sqrt(1 - Math.pow(2 * x, 2))) / 2 :
            (Math.sqrt(1 - Math.pow(-2 * x + 2, 2)) + 1) / 2;
    }

    /**
     * Back関数を使用したイージング関数（抜き）。
     * 目標値を一度通り過ぎてから（オーバーシュート）、戻ってくるような動きをします。
     * バネのような弾力感や、勢い余って行き過ぎるコミカルな表現に適しています。
     * UIのポップアップなどで、注目を集めるために使用されることが多いです。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（1.0を超える場合がある）。
     */
    static easeOutBack(x: number): number {
        const c1 = 1.70158;
        const c3 = c1 + 1;
        return 1 + c3 * Math.pow(x - 1, 3) + c1 * Math.pow(x - 1, 2);
    }

    /**
     * Back関数を使用したイージング関数（入り抜き）。
     * 開始時に一度後ろに下がってから勢いよく進み、
     * 終了時にも一度行き過ぎてから戻る動きをします。
     * 非常に強調された、カートゥーンアニメーションのような
     * 生き生きとした動き（予備動作とフォロースルー）を表現できます。
     *
     * @param x 進行度（0.0 〜 1.0）。
     * @returns イージング適用後の値（0.0未満や1.0を超える場合がある）。
     */
    static easeInOutBack(x: number): number {
        const c1 = 1.70158;
        const c2 = c1 * 1.525;
        return x < 0.5 ?
            (Math.pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2)) / 2 :
            (Math.pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2;
    }

    /**
     * ジグザグ（三角波）関数。
     * 0から1へ進み、また0に戻る動きを繰り返します。
     * イージングというよりは、往復運動を生成するためのユーティリティです。
     * 点滅や、一定範囲を行き来するパトロールのような動きを作るのに便利です。
     * 入力値xが増え続けると、出力は0と1の間を直線的に往復します。
     *
     * @param x 進行度（制限なし）。
     * @returns 0.0 〜 1.0 の範囲で往復する値。
     */
    static zigzag(x: number): number {
        return Math.abs((x % 2) - 1);
    }
}